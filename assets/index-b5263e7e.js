import{c as we,g as lr,r as Ye,i as Ke,a as ze,b as te,j as Se,B as ce,d as Y,D as Gt,T as ke,u as ur,e as fr,f as Qe,h as et,L as cr,k as dr,l as hr,m as pr,G as gr,n as yr,o as tt,I as je,p as _r,q as wr,S as br,s as Er,R as mr}from"./index-da64fe47.js";var $e={},Rr={get exports(){return $e},set exports(n){$e=n}},rt,St;function vr(){if(St)return rt;St=1;var n=1e3,r=n*60,o=r*60,f=o*24,h=f*7,w=f*365.25;rt=function(b,m){m=m||{};var N=typeof b;if(N==="string"&&b.length>0)return E(b);if(N==="number"&&isFinite(b))return m.long?y(b):u(b);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b))};function E(b){if(b=String(b),!(b.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(b);if(m){var N=parseFloat(m[1]),D=(m[2]||"ms").toLowerCase();switch(D){case"years":case"year":case"yrs":case"yr":case"y":return N*w;case"weeks":case"week":case"w":return N*h;case"days":case"day":case"d":return N*f;case"hours":case"hour":case"hrs":case"hr":case"h":return N*o;case"minutes":case"minute":case"mins":case"min":case"m":return N*r;case"seconds":case"second":case"secs":case"sec":case"s":return N*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return N;default:return}}}}function u(b){var m=Math.abs(b);return m>=f?Math.round(b/f)+"d":m>=o?Math.round(b/o)+"h":m>=r?Math.round(b/r)+"m":m>=n?Math.round(b/n)+"s":b+"ms"}function y(b){var m=Math.abs(b);return m>=f?v(b,m,f,"day"):m>=o?v(b,m,o,"hour"):m>=r?v(b,m,r,"minute"):m>=n?v(b,m,n,"second"):b+" ms"}function v(b,m,N,D){var M=m>=N*1.5;return Math.round(b/N)+" "+D+(M?"s":"")}return rt}function Sr(n){o.debug=o,o.default=o,o.coerce=y,o.disable=w,o.enable=h,o.enabled=E,o.humanize=vr(),o.destroy=v,Object.keys(n).forEach(b=>{o[b]=n[b]}),o.names=[],o.skips=[],o.formatters={};function r(b){let m=0;for(let N=0;N<b.length;N++)m=(m<<5)-m+b.charCodeAt(N),m|=0;return o.colors[Math.abs(m)%o.colors.length]}o.selectColor=r;function o(b){let m,N=null,D,M;function F(...I){if(!F.enabled)return;const d=F,C=Number(new Date),T=C-(m||C);d.diff=T,d.prev=m,d.curr=C,m=C,I[0]=o.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let A=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(P,K)=>{if(P==="%%")return"%";A++;const q=o.formatters[K];if(typeof q=="function"){const U=I[A];P=q.call(d,U),I.splice(A,1),A--}return P}),o.formatArgs.call(d,I),(d.log||o.log).apply(d,I)}return F.namespace=b,F.useColors=o.useColors(),F.color=o.selectColor(b),F.extend=f,F.destroy=o.destroy,Object.defineProperty(F,"enabled",{enumerable:!0,configurable:!1,get:()=>N!==null?N:(D!==o.namespaces&&(D=o.namespaces,M=o.enabled(b)),M),set:I=>{N=I}}),typeof o.init=="function"&&o.init(F),F}function f(b,m){const N=o(this.namespace+(typeof m>"u"?":":m)+b);return N.log=this.log,N}function h(b){o.save(b),o.namespaces=b,o.names=[],o.skips=[];let m;const N=(typeof b=="string"?b:"").split(/[\s,]+/),D=N.length;for(m=0;m<D;m++)N[m]&&(b=N[m].replace(/\*/g,".*?"),b[0]==="-"?o.skips.push(new RegExp("^"+b.slice(1)+"$")):o.names.push(new RegExp("^"+b+"$")))}function w(){const b=[...o.names.map(u),...o.skips.map(u).map(m=>"-"+m)].join(",");return o.enable(""),b}function E(b){if(b[b.length-1]==="*")return!0;let m,N;for(m=0,N=o.skips.length;m<N;m++)if(o.skips[m].test(b))return!1;for(m=0,N=o.names.length;m<N;m++)if(o.names[m].test(b))return!0;return!1}function u(b){return b.toString().substring(2,b.toString().length-2).replace(/\.\*\?$/,"*")}function y(b){return b instanceof Error?b.stack||b.message:b}function v(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}var Cr=Sr;(function(n,r){r.formatArgs=f,r.save=h,r.load=w,r.useColors=o,r.storage=E(),r.destroy=(()=>{let y=!1;return()=>{y||(y=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function f(y){if(y[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+y[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const v="color: "+this.color;y.splice(1,0,v,"color: inherit");let b=0,m=0;y[0].replace(/%[a-zA-Z%]/g,N=>{N!=="%%"&&(b++,N==="%c"&&(m=b))}),y.splice(m,0,v)}r.log=console.debug||console.log||(()=>{});function h(y){try{y?r.storage.setItem("debug",y):r.storage.removeItem("debug")}catch{}}function w(){let y;try{y=r.storage.getItem("debug")}catch{}return!y&&typeof process<"u"&&"env"in process&&(y={}.DEBUG),y}function E(){try{return localStorage}catch{}}n.exports=Cr(r);const{formatters:u}=n.exports;u.j=function(y){try{return JSON.stringify(y)}catch(v){return"[UnexpectedJSONParseError]: "+v.message}}})(Rr,$e);var Tr=function(){if(typeof globalThis>"u")return null;var r={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return r.RTCPeerConnection?r:null},yt={},Ct={get exports(){return yt},set exports(n){yt=n}},Pe={},xr={get exports(){return Pe},set exports(n){Pe=n}},Oe={},Je={};Je.byteLength=Br;Je.toByteArray=Nr;Je.fromByteArray=Dr;var ge=[],fe=[],Ar=typeof Uint8Array<"u"?Uint8Array:Array,it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ne=0,Ir=it.length;Ne<Ir;++Ne)ge[Ne]=it[Ne],fe[it.charCodeAt(Ne)]=Ne;fe["-".charCodeAt(0)]=62;fe["_".charCodeAt(0)]=63;function Yt(n){var r=n.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=n.indexOf("=");o===-1&&(o=r);var f=o===r?0:4-o%4;return[o,f]}function Br(n){var r=Yt(n),o=r[0],f=r[1];return(o+f)*3/4-f}function Fr(n,r,o){return(r+o)*3/4-o}function Nr(n){var r,o=Yt(n),f=o[0],h=o[1],w=new Ar(Fr(n,f,h)),E=0,u=h>0?f-4:f,y;for(y=0;y<u;y+=4)r=fe[n.charCodeAt(y)]<<18|fe[n.charCodeAt(y+1)]<<12|fe[n.charCodeAt(y+2)]<<6|fe[n.charCodeAt(y+3)],w[E++]=r>>16&255,w[E++]=r>>8&255,w[E++]=r&255;return h===2&&(r=fe[n.charCodeAt(y)]<<2|fe[n.charCodeAt(y+1)]>>4,w[E++]=r&255),h===1&&(r=fe[n.charCodeAt(y)]<<10|fe[n.charCodeAt(y+1)]<<4|fe[n.charCodeAt(y+2)]>>2,w[E++]=r>>8&255,w[E++]=r&255),w}function Mr(n){return ge[n>>18&63]+ge[n>>12&63]+ge[n>>6&63]+ge[n&63]}function Or(n,r,o){for(var f,h=[],w=r;w<o;w+=3)f=(n[w]<<16&16711680)+(n[w+1]<<8&65280)+(n[w+2]&255),h.push(Mr(f));return h.join("")}function Dr(n){for(var r,o=n.length,f=o%3,h=[],w=16383,E=0,u=o-f;E<u;E+=w)h.push(Or(n,E,E+w>u?u:E+w));return f===1?(r=n[o-1],h.push(ge[r>>2]+ge[r<<4&63]+"==")):f===2&&(r=(n[o-2]<<8)+n[o-1],h.push(ge[r>>10]+ge[r>>4&63]+ge[r<<2&63]+"=")),h.join("")}var wt={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */wt.read=function(n,r,o,f,h){var w,E,u=h*8-f-1,y=(1<<u)-1,v=y>>1,b=-7,m=o?h-1:0,N=o?-1:1,D=n[r+m];for(m+=N,w=D&(1<<-b)-1,D>>=-b,b+=u;b>0;w=w*256+n[r+m],m+=N,b-=8);for(E=w&(1<<-b)-1,w>>=-b,b+=f;b>0;E=E*256+n[r+m],m+=N,b-=8);if(w===0)w=1-v;else{if(w===y)return E?NaN:(D?-1:1)*(1/0);E=E+Math.pow(2,f),w=w-v}return(D?-1:1)*E*Math.pow(2,w-f)};wt.write=function(n,r,o,f,h,w){var E,u,y,v=w*8-h-1,b=(1<<v)-1,m=b>>1,N=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=f?0:w-1,M=f?1:-1,F=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,E=b):(E=Math.floor(Math.log(r)/Math.LN2),r*(y=Math.pow(2,-E))<1&&(E--,y*=2),E+m>=1?r+=N/y:r+=N*Math.pow(2,1-m),r*y>=2&&(E++,y/=2),E+m>=b?(u=0,E=b):E+m>=1?(u=(r*y-1)*Math.pow(2,h),E=E+m):(u=r*Math.pow(2,m-1)*Math.pow(2,h),E=0));h>=8;n[o+D]=u&255,D+=M,u/=256,h-=8);for(E=E<<h|u,v+=h;v>0;n[o+D]=E&255,D+=M,E/=256,v-=8);n[o+D-M]|=F*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const r=Je,o=wt,f=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=u,n.SlowBuffer=C,n.INSPECT_MAX_BYTES=50;const h=2147483647;n.kMaxLength=h,u.TYPED_ARRAY_SUPPORT=w(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{const i=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(i,e),i.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function E(i){if(i>h)throw new RangeError('The value "'+i+'" is invalid for option "size"');const e=new Uint8Array(i);return Object.setPrototypeOf(e,u.prototype),e}function u(i,e,t){if(typeof i=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(i)}return y(i,e,t)}u.poolSize=8192;function y(i,e,t){if(typeof i=="string")return N(i,e);if(ArrayBuffer.isView(i))return M(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(se(i,ArrayBuffer)||i&&se(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(se(i,SharedArrayBuffer)||i&&se(i.buffer,SharedArrayBuffer)))return F(i,e,t);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const a=i.valueOf&&i.valueOf();if(a!=null&&a!==i)return u.from(a,e,t);const c=I(i);if(c)return c;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return u.from(i[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}u.from=function(i,e,t){return y(i,e,t)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function v(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function b(i,e,t){return v(i),i<=0?E(i):e!==void 0?typeof t=="string"?E(i).fill(e,t):E(i).fill(e):E(i)}u.alloc=function(i,e,t){return b(i,e,t)};function m(i){return v(i),E(i<0?0:d(i)|0)}u.allocUnsafe=function(i){return m(i)},u.allocUnsafeSlow=function(i){return m(i)};function N(i,e){if((typeof e!="string"||e==="")&&(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=T(i,e)|0;let a=E(t);const c=a.write(i,e);return c!==t&&(a=a.slice(0,c)),a}function D(i){const e=i.length<0?0:d(i.length)|0,t=E(e);for(let a=0;a<e;a+=1)t[a]=i[a]&255;return t}function M(i){if(se(i,Uint8Array)){const e=new Uint8Array(i);return F(e.buffer,e.byteOffset,e.byteLength)}return D(i)}function F(i,e,t){if(e<0||i.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let a;return e===void 0&&t===void 0?a=new Uint8Array(i):t===void 0?a=new Uint8Array(i,e):a=new Uint8Array(i,e,t),Object.setPrototypeOf(a,u.prototype),a}function I(i){if(u.isBuffer(i)){const e=d(i.length)|0,t=E(e);return t.length===0||i.copy(t,0,0,e),t}if(i.length!==void 0)return typeof i.length!="number"||Re(i.length)?E(0):D(i);if(i.type==="Buffer"&&Array.isArray(i.data))return D(i.data)}function d(i){if(i>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return i|0}function C(i){return+i!=i&&(i=0),u.alloc(+i)}u.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==u.prototype},u.compare=function(e,t){if(se(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),se(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let a=e.length,c=t.length;for(let g=0,R=Math.min(a,c);g<R;++g)if(e[g]!==t[g]){a=e[g],c=t[g];break}return a<c?-1:c<a?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return u.alloc(0);let a;if(t===void 0)for(t=0,a=0;a<e.length;++a)t+=e[a].length;const c=u.allocUnsafe(t);let g=0;for(a=0;a<e.length;++a){let R=e[a];if(se(R,Uint8Array))g+R.length>c.length?(u.isBuffer(R)||(R=u.from(R)),R.copy(c,g)):Uint8Array.prototype.set.call(c,R,g);else if(u.isBuffer(R))R.copy(c,g);else throw new TypeError('"list" argument must be an Array of Buffers');g+=R.length}return c};function T(i,e){if(u.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||se(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);const t=i.length,a=arguments.length>2&&arguments[2]===!0;if(!a&&t===0)return 0;let c=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return G(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return De(i).length;default:if(c)return a?-1:G(i).length;e=(""+e).toLowerCase(),c=!0}}u.byteLength=T;function A(i,e,t){let a=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(i||(i="utf8");;)switch(i){case"hex":return pe(this,e,t);case"utf8":case"utf-8":return j(this,e,t);case"ascii":return oe(this,e,t);case"latin1":case"binary":return he(this,e,t);case"base64":return L(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,e,t);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),a=!0}}u.prototype._isBuffer=!0;function B(i,e,t){const a=i[e];i[e]=i[t],i[t]=a}u.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)B(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)B(this,t,t+3),B(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)B(this,t,t+7),B(this,t+1,t+6),B(this,t+2,t+5),B(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?j(this,0,e):A.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:u.compare(this,e)===0},u.prototype.inspect=function(){let e="";const t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},f&&(u.prototype[f]=u.prototype.inspect),u.prototype.compare=function(e,t,a,c,g){if(se(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),a===void 0&&(a=e?e.length:0),c===void 0&&(c=0),g===void 0&&(g=this.length),t<0||a>e.length||c<0||g>this.length)throw new RangeError("out of range index");if(c>=g&&t>=a)return 0;if(c>=g)return-1;if(t>=a)return 1;if(t>>>=0,a>>>=0,c>>>=0,g>>>=0,this===e)return 0;let R=g-c,H=a-t;const re=Math.min(R,H),Q=this.slice(c,g),ie=e.slice(t,a);for(let z=0;z<re;++z)if(Q[z]!==ie[z]){R=Q[z],H=ie[z];break}return R<H?-1:H<R?1:0};function P(i,e,t,a,c){if(i.length===0)return-1;if(typeof t=="string"?(a=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Re(t)&&(t=c?0:i.length-1),t<0&&(t=i.length+t),t>=i.length){if(c)return-1;t=i.length-1}else if(t<0)if(c)t=0;else return-1;if(typeof e=="string"&&(e=u.from(e,a)),u.isBuffer(e))return e.length===0?-1:K(i,e,t,a,c);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?c?Uint8Array.prototype.indexOf.call(i,e,t):Uint8Array.prototype.lastIndexOf.call(i,e,t):K(i,[e],t,a,c);throw new TypeError("val must be string, number or Buffer")}function K(i,e,t,a,c){let g=1,R=i.length,H=e.length;if(a!==void 0&&(a=String(a).toLowerCase(),a==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le")){if(i.length<2||e.length<2)return-1;g=2,R/=2,H/=2,t/=2}function re(ie,z){return g===1?ie[z]:ie.readUInt16BE(z*g)}let Q;if(c){let ie=-1;for(Q=t;Q<R;Q++)if(re(i,Q)===re(e,ie===-1?0:Q-ie)){if(ie===-1&&(ie=Q),Q-ie+1===H)return ie*g}else ie!==-1&&(Q-=Q-ie),ie=-1}else for(t+H>R&&(t=R-H),Q=t;Q>=0;Q--){let ie=!0;for(let z=0;z<H;z++)if(re(i,Q+z)!==re(e,z)){ie=!1;break}if(ie)return Q}return-1}u.prototype.includes=function(e,t,a){return this.indexOf(e,t,a)!==-1},u.prototype.indexOf=function(e,t,a){return P(this,e,t,a,!0)},u.prototype.lastIndexOf=function(e,t,a){return P(this,e,t,a,!1)};function q(i,e,t,a){t=Number(t)||0;const c=i.length-t;a?(a=Number(a),a>c&&(a=c)):a=c;const g=e.length;a>g/2&&(a=g/2);let R;for(R=0;R<a;++R){const H=parseInt(e.substr(R*2,2),16);if(Re(H))return R;i[t+R]=H}return R}function U(i,e,t,a){return Fe(G(e,i.length-t),i,t,a)}function ae(i,e,t,a){return Fe(Ee(e),i,t,a)}function ye(i,e,t,a){return Fe(De(e),i,t,a)}function me(i,e,t,a){return Fe(Be(e,i.length-t),i,t,a)}u.prototype.write=function(e,t,a,c){if(t===void 0)c="utf8",a=this.length,t=0;else if(a===void 0&&typeof t=="string")c=t,a=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(a)?(a=a>>>0,c===void 0&&(c="utf8")):(c=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const g=this.length-t;if((a===void 0||a>g)&&(a=g),e.length>0&&(a<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");let R=!1;for(;;)switch(c){case"hex":return q(this,e,t,a);case"utf8":case"utf-8":return U(this,e,t,a);case"ascii":case"latin1":case"binary":return ae(this,e,t,a);case"base64":return ye(this,e,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,e,t,a);default:if(R)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase(),R=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(i,e,t){return e===0&&t===i.length?r.fromByteArray(i):r.fromByteArray(i.slice(e,t))}function j(i,e,t){t=Math.min(i.length,t);const a=[];let c=e;for(;c<t;){const g=i[c];let R=null,H=g>239?4:g>223?3:g>191?2:1;if(c+H<=t){let re,Q,ie,z;switch(H){case 1:g<128&&(R=g);break;case 2:re=i[c+1],(re&192)===128&&(z=(g&31)<<6|re&63,z>127&&(R=z));break;case 3:re=i[c+1],Q=i[c+2],(re&192)===128&&(Q&192)===128&&(z=(g&15)<<12|(re&63)<<6|Q&63,z>2047&&(z<55296||z>57343)&&(R=z));break;case 4:re=i[c+1],Q=i[c+2],ie=i[c+3],(re&192)===128&&(Q&192)===128&&(ie&192)===128&&(z=(g&15)<<18|(re&63)<<12|(Q&63)<<6|ie&63,z>65535&&z<1114112&&(R=z))}}R===null?(R=65533,H=1):R>65535&&(R-=65536,a.push(R>>>10&1023|55296),R=56320|R&1023),a.push(R),c+=H}return ne(a)}const X=4096;function ne(i){const e=i.length;if(e<=X)return String.fromCharCode.apply(String,i);let t="",a=0;for(;a<e;)t+=String.fromCharCode.apply(String,i.slice(a,a+=X));return t}function oe(i,e,t){let a="";t=Math.min(i.length,t);for(let c=e;c<t;++c)a+=String.fromCharCode(i[c]&127);return a}function he(i,e,t){let a="";t=Math.min(i.length,t);for(let c=e;c<t;++c)a+=String.fromCharCode(i[c]);return a}function pe(i,e,t){const a=i.length;(!e||e<0)&&(e=0),(!t||t<0||t>a)&&(t=a);let c="";for(let g=e;g<t;++g)c+=Le[i[g]];return c}function _e(i,e,t){const a=i.slice(e,t);let c="";for(let g=0;g<a.length-1;g+=2)c+=String.fromCharCode(a[g]+a[g+1]*256);return c}u.prototype.slice=function(e,t){const a=this.length;e=~~e,t=t===void 0?a:~~t,e<0?(e+=a,e<0&&(e=0)):e>a&&(e=a),t<0?(t+=a,t<0&&(t=0)):t>a&&(t=a),t<e&&(t=e);const c=this.subarray(e,t);return Object.setPrototypeOf(c,u.prototype),c};function J(i,e,t){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+e>t)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,a){e=e>>>0,t=t>>>0,a||J(e,t,this.length);let c=this[e],g=1,R=0;for(;++R<t&&(g*=256);)c+=this[e+R]*g;return c},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,a){e=e>>>0,t=t>>>0,a||J(e,t,this.length);let c=this[e+--t],g=1;for(;t>0&&(g*=256);)c+=this[e+--t]*g;return c},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e=e>>>0,t||J(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||J(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||J(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||J(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||J(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=ue(function(e){e=e>>>0,S(e,"offset");const t=this[e],a=this[e+7];(t===void 0||a===void 0)&&O(e,this.length-8);const c=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,g=this[++e]+this[++e]*2**8+this[++e]*2**16+a*2**24;return BigInt(c)+(BigInt(g)<<BigInt(32))}),u.prototype.readBigUInt64BE=ue(function(e){e=e>>>0,S(e,"offset");const t=this[e],a=this[e+7];(t===void 0||a===void 0)&&O(e,this.length-8);const c=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],g=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+a;return(BigInt(c)<<BigInt(32))+BigInt(g)}),u.prototype.readIntLE=function(e,t,a){e=e>>>0,t=t>>>0,a||J(e,t,this.length);let c=this[e],g=1,R=0;for(;++R<t&&(g*=256);)c+=this[e+R]*g;return g*=128,c>=g&&(c-=Math.pow(2,8*t)),c},u.prototype.readIntBE=function(e,t,a){e=e>>>0,t=t>>>0,a||J(e,t,this.length);let c=t,g=1,R=this[e+--c];for(;c>0&&(g*=256);)R+=this[e+--c]*g;return g*=128,R>=g&&(R-=Math.pow(2,8*t)),R},u.prototype.readInt8=function(e,t){return e=e>>>0,t||J(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},u.prototype.readInt16LE=function(e,t){e=e>>>0,t||J(e,2,this.length);const a=this[e]|this[e+1]<<8;return a&32768?a|4294901760:a},u.prototype.readInt16BE=function(e,t){e=e>>>0,t||J(e,2,this.length);const a=this[e+1]|this[e]<<8;return a&32768?a|4294901760:a},u.prototype.readInt32LE=function(e,t){return e=e>>>0,t||J(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e=e>>>0,t||J(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=ue(function(e){e=e>>>0,S(e,"offset");const t=this[e],a=this[e+7];(t===void 0||a===void 0)&&O(e,this.length-8);const c=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(a<<24);return(BigInt(c)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),u.prototype.readBigInt64BE=ue(function(e){e=e>>>0,S(e,"offset");const t=this[e],a=this[e+7];(t===void 0||a===void 0)&&O(e,this.length-8);const c=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(c)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+a)}),u.prototype.readFloatLE=function(e,t){return e=e>>>0,t||J(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e=e>>>0,t||J(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||J(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||J(e,8,this.length),o.read(this,e,!1,52,8)};function ee(i,e,t,a,c,g){if(!u.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>c||e<g)throw new RangeError('"value" argument is out of bounds');if(t+a>i.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,a,c){if(e=+e,t=t>>>0,a=a>>>0,!c){const H=Math.pow(2,8*a)-1;ee(this,e,t,a,H,0)}let g=1,R=0;for(this[t]=e&255;++R<a&&(g*=256);)this[t+R]=e/g&255;return t+a},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,a,c){if(e=+e,t=t>>>0,a=a>>>0,!c){const H=Math.pow(2,8*a)-1;ee(this,e,t,a,H,0)}let g=a-1,R=1;for(this[t+g]=e&255;--g>=0&&(R*=256);)this[t+g]=e/R&255;return t+a},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,a){return e=+e,t=t>>>0,a||ee(this,e,t,1,255,0),this[t]=e&255,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,a){return e=+e,t=t>>>0,a||ee(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,a){return e=+e,t=t>>>0,a||ee(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,a){return e=+e,t=t>>>0,a||ee(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,a){return e=+e,t=t>>>0,a||ee(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function le(i,e,t,a,c){l(e,a,c,i,t,7);let g=Number(e&BigInt(4294967295));i[t++]=g,g=g>>8,i[t++]=g,g=g>>8,i[t++]=g,g=g>>8,i[t++]=g;let R=Number(e>>BigInt(32)&BigInt(4294967295));return i[t++]=R,R=R>>8,i[t++]=R,R=R>>8,i[t++]=R,R=R>>8,i[t++]=R,t}function Ae(i,e,t,a,c){l(e,a,c,i,t,7);let g=Number(e&BigInt(4294967295));i[t+7]=g,g=g>>8,i[t+6]=g,g=g>>8,i[t+5]=g,g=g>>8,i[t+4]=g;let R=Number(e>>BigInt(32)&BigInt(4294967295));return i[t+3]=R,R=R>>8,i[t+2]=R,R=R>>8,i[t+1]=R,R=R>>8,i[t]=R,t+8}u.prototype.writeBigUInt64LE=ue(function(e,t=0){return le(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ue(function(e,t=0){return Ae(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(e,t,a,c){if(e=+e,t=t>>>0,!c){const re=Math.pow(2,8*a-1);ee(this,e,t,a,re-1,-re)}let g=0,R=1,H=0;for(this[t]=e&255;++g<a&&(R*=256);)e<0&&H===0&&this[t+g-1]!==0&&(H=1),this[t+g]=(e/R>>0)-H&255;return t+a},u.prototype.writeIntBE=function(e,t,a,c){if(e=+e,t=t>>>0,!c){const re=Math.pow(2,8*a-1);ee(this,e,t,a,re-1,-re)}let g=a-1,R=1,H=0;for(this[t+g]=e&255;--g>=0&&(R*=256);)e<0&&H===0&&this[t+g+1]!==0&&(H=1),this[t+g]=(e/R>>0)-H&255;return t+a},u.prototype.writeInt8=function(e,t,a){return e=+e,t=t>>>0,a||ee(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},u.prototype.writeInt16LE=function(e,t,a){return e=+e,t=t>>>0,a||ee(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,a){return e=+e,t=t>>>0,a||ee(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},u.prototype.writeInt32LE=function(e,t,a){return e=+e,t=t>>>0,a||ee(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,a){return e=+e,t=t>>>0,a||ee(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},u.prototype.writeBigInt64LE=ue(function(e,t=0){return le(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ue(function(e,t=0){return Ae(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ie(i,e,t,a,c,g){if(t+a>i.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function _(i,e,t,a,c){return e=+e,t=t>>>0,c||Ie(i,e,t,4),o.write(i,e,t,a,23,4),t+4}u.prototype.writeFloatLE=function(e,t,a){return _(this,e,t,!0,a)},u.prototype.writeFloatBE=function(e,t,a){return _(this,e,t,!1,a)};function p(i,e,t,a,c){return e=+e,t=t>>>0,c||Ie(i,e,t,8),o.write(i,e,t,a,52,8),t+8}u.prototype.writeDoubleLE=function(e,t,a){return p(this,e,t,!0,a)},u.prototype.writeDoubleBE=function(e,t,a){return p(this,e,t,!1,a)},u.prototype.copy=function(e,t,a,c){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(a||(a=0),!c&&c!==0&&(c=this.length),t>=e.length&&(t=e.length),t||(t=0),c>0&&c<a&&(c=a),c===a||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),e.length-t<c-a&&(c=e.length-t+a);const g=c-a;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,a,c):Uint8Array.prototype.set.call(e,this.subarray(a,c),t),g},u.prototype.fill=function(e,t,a,c){if(typeof e=="string"){if(typeof t=="string"?(c=t,t=0,a=this.length):typeof a=="string"&&(c=a,a=this.length),c!==void 0&&typeof c!="string")throw new TypeError("encoding must be a string");if(typeof c=="string"&&!u.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(e.length===1){const R=e.charCodeAt(0);(c==="utf8"&&R<128||c==="latin1")&&(e=R)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<a)throw new RangeError("Out of range index");if(a<=t)return this;t=t>>>0,a=a===void 0?this.length:a>>>0,e||(e=0);let g;if(typeof e=="number")for(g=t;g<a;++g)this[g]=e;else{const R=u.isBuffer(e)?e:u.from(e,c),H=R.length;if(H===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(g=0;g<a-t;++g)this[g+t]=R[g%H]}return this};const x={};function k(i,e,t){x[i]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(c){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:c,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}k("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),k("ERR_INVALID_ARG_TYPE",function(i,e){return`The "${i}" argument must be of type number. Received type ${typeof e}`},TypeError),k("ERR_OUT_OF_RANGE",function(i,e,t){let a=`The value of "${i}" is out of range.`,c=t;return Number.isInteger(t)&&Math.abs(t)>2**32?c=$(String(t)):typeof t=="bigint"&&(c=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(c=$(c)),c+="n"),a+=` It must be ${e}. Received ${c}`,a},RangeError);function $(i){let e="",t=i.length;const a=i[0]==="-"?1:0;for(;t>=a+4;t-=3)e=`_${i.slice(t-3,t)}${e}`;return`${i.slice(0,t)}${e}`}function s(i,e,t){S(e,"offset"),(i[e]===void 0||i[e+t]===void 0)&&O(e,i.length-(t+1))}function l(i,e,t,a,c,g){if(i>t||i<e){const R=typeof e=="bigint"?"n":"";let H;throw g>3?e===0||e===BigInt(0)?H=`>= 0${R} and < 2${R} ** ${(g+1)*8}${R}`:H=`>= -(2${R} ** ${(g+1)*8-1}${R}) and < 2 ** ${(g+1)*8-1}${R}`:H=`>= ${e}${R} and <= ${t}${R}`,new x.ERR_OUT_OF_RANGE("value",H,i)}s(a,c,g)}function S(i,e){if(typeof i!="number")throw new x.ERR_INVALID_ARG_TYPE(e,"number",i)}function O(i,e,t){throw Math.floor(i)!==i?(S(i,t),new x.ERR_OUT_OF_RANGE(t||"offset","an integer",i)):e<0?new x.ERR_BUFFER_OUT_OF_BOUNDS:new x.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,i)}const Z=/[^+/0-9A-Za-z-_]/g;function W(i){if(i=i.split("=")[0],i=i.trim().replace(Z,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function G(i,e){e=e||1/0;let t;const a=i.length;let c=null;const g=[];for(let R=0;R<a;++R){if(t=i.charCodeAt(R),t>55295&&t<57344){if(!c){if(t>56319){(e-=3)>-1&&g.push(239,191,189);continue}else if(R+1===a){(e-=3)>-1&&g.push(239,191,189);continue}c=t;continue}if(t<56320){(e-=3)>-1&&g.push(239,191,189),c=t;continue}t=(c-55296<<10|t-56320)+65536}else c&&(e-=3)>-1&&g.push(239,191,189);if(c=null,t<128){if((e-=1)<0)break;g.push(t)}else if(t<2048){if((e-=2)<0)break;g.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;g.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;g.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return g}function Ee(i){const e=[];for(let t=0;t<i.length;++t)e.push(i.charCodeAt(t)&255);return e}function Be(i,e){let t,a,c;const g=[];for(let R=0;R<i.length&&!((e-=2)<0);++R)t=i.charCodeAt(R),a=t>>8,c=t%256,g.push(c),g.push(a);return g}function De(i){return r.toByteArray(W(i))}function Fe(i,e,t,a){let c;for(c=0;c<a&&!(c+t>=e.length||c>=i.length);++c)e[c+t]=i[c];return c}function se(i,e){return i instanceof e||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===e.name}function Re(i){return i!==i}const Le=function(){const i="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const a=t*16;for(let c=0;c<16;++c)e[a+c]=i[t]+i[c]}return e}();function ue(i){return typeof BigInt>"u"?ve:i}function ve(){throw new Error("BigInt not supported")}})(Oe);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,r){var o=Oe,f=o.Buffer;function h(E,u){for(var y in E)u[y]=E[y]}f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?n.exports=o:(h(o,r),r.Buffer=w);function w(E,u,y){return f(E,u,y)}w.prototype=Object.create(f.prototype),h(f,w),w.from=function(E,u,y){if(typeof E=="number")throw new TypeError("Argument must not be a number");return f(E,u,y)},w.alloc=function(E,u,y){if(typeof E!="number")throw new TypeError("Argument must be a number");var v=f(E);return u!==void 0?typeof y=="string"?v.fill(u,y):v.fill(u):v.fill(0),v},w.allocUnsafe=function(E){if(typeof E!="number")throw new TypeError("Argument must be a number");return f(E)},w.allocUnsafeSlow=function(E){if(typeof E!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(E)}})(xr,Pe);var nt=65536,Lr=4294967295;function kr(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Pr=Pe.Buffer,We=we.crypto||we.msCrypto;We&&We.getRandomValues?Ct.exports=Ur:Ct.exports=kr;function Ur(n,r){if(n>Lr)throw new RangeError("requested too many random bytes");var o=Pr.allocUnsafe(n);if(n>0)if(n>nt)for(var f=0;f<n;f+=nt)We.getRandomValues(o.slice(f,f+nt));else We.getRandomValues(o);return typeof r=="function"?process.nextTick(function(){r(null,o)}):o}var He={},jr={get exports(){return He},set exports(n){He=n}};const qr={},$r=Object.freeze(Object.defineProperty({__proto__:null,default:qr},Symbol.toStringTag,{value:"Module"})),Ve=lr($r);var Kt=Ve.EventEmitter,ot,Tt;function Wr(){if(Tt)return ot;Tt=1;function n(M,F){var I=Object.keys(M);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(M);F&&(d=d.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),I.push.apply(I,d)}return I}function r(M){for(var F=1;F<arguments.length;F++){var I=arguments[F]!=null?arguments[F]:{};F%2?n(Object(I),!0).forEach(function(d){o(M,d,I[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(I)):n(Object(I)).forEach(function(d){Object.defineProperty(M,d,Object.getOwnPropertyDescriptor(I,d))})}return M}function o(M,F,I){return F=E(F),F in M?Object.defineProperty(M,F,{value:I,enumerable:!0,configurable:!0,writable:!0}):M[F]=I,M}function f(M,F){if(!(M instanceof F))throw new TypeError("Cannot call a class as a function")}function h(M,F){for(var I=0;I<F.length;I++){var d=F[I];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(M,E(d.key),d)}}function w(M,F,I){return F&&h(M.prototype,F),I&&h(M,I),Object.defineProperty(M,"prototype",{writable:!1}),M}function E(M){var F=u(M,"string");return typeof F=="symbol"?F:String(F)}function u(M,F){if(typeof M!="object"||M===null)return M;var I=M[Symbol.toPrimitive];if(I!==void 0){var d=I.call(M,F||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(M)}var y=Oe,v=y.Buffer,b=Ve,m=b.inspect,N=m&&m.custom||"inspect";function D(M,F,I){v.prototype.copy.call(M,F,I)}return ot=function(){function M(){f(this,M),this.head=null,this.tail=null,this.length=0}return w(M,[{key:"push",value:function(I){var d={data:I,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length}},{key:"unshift",value:function(I){var d={data:I,next:this.head};this.length===0&&(this.tail=d),this.head=d,++this.length}},{key:"shift",value:function(){if(this.length!==0){var I=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,I}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(I){if(this.length===0)return"";for(var d=this.head,C=""+d.data;d=d.next;)C+=I+d.data;return C}},{key:"concat",value:function(I){if(this.length===0)return v.alloc(0);for(var d=v.allocUnsafe(I>>>0),C=this.head,T=0;C;)D(C.data,d,T),T+=C.data.length,C=C.next;return d}},{key:"consume",value:function(I,d){var C;return I<this.head.data.length?(C=this.head.data.slice(0,I),this.head.data=this.head.data.slice(I)):I===this.head.data.length?C=this.shift():C=d?this._getString(I):this._getBuffer(I),C}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(I){var d=this.head,C=1,T=d.data;for(I-=T.length;d=d.next;){var A=d.data,B=I>A.length?A.length:I;if(B===A.length?T+=A:T+=A.slice(0,I),I-=B,I===0){B===A.length?(++C,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=A.slice(B));break}++C}return this.length-=C,T}},{key:"_getBuffer",value:function(I){var d=v.allocUnsafe(I),C=this.head,T=1;for(C.data.copy(d),I-=C.data.length;C=C.next;){var A=C.data,B=I>A.length?A.length:I;if(A.copy(d,d.length-I,0,B),I-=B,I===0){B===A.length?(++T,C.next?this.head=C.next:this.head=this.tail=null):(this.head=C,C.data=A.slice(B));break}++T}return this.length-=T,d}},{key:N,value:function(I,d){return m(this,r(r({},d),{},{depth:0,customInspect:!1}))}}]),M}(),ot}function Hr(n,r){var o=this,f=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return f||h?(r?r(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(_t,this,n)):process.nextTick(_t,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(w){!r&&w?o._writableState?o._writableState.errorEmitted?process.nextTick(qe,o):(o._writableState.errorEmitted=!0,process.nextTick(xt,o,w)):process.nextTick(xt,o,w):r?(process.nextTick(qe,o),r(w)):process.nextTick(qe,o)}),this)}function xt(n,r){_t(n,r),qe(n)}function qe(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function Vr(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function _t(n,r){n.emit("error",r)}function Gr(n,r){var o=n._readableState,f=n._writableState;o&&o.autoDestroy||f&&f.autoDestroy?n.destroy(r):n.emit("error",r)}var zt={destroy:Hr,undestroy:Vr,errorOrDestroy:Gr},xe={};function Yr(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r}var Jt={};function de(n,r,o){o||(o=Error);function f(w,E,u){return typeof r=="string"?r:r(w,E,u)}var h=function(w){Yr(E,w);function E(u,y,v){return w.call(this,f(u,y,v))||this}return E}(o);h.prototype.name=o.name,h.prototype.code=n,Jt[n]=h}function At(n,r){if(Array.isArray(n)){var o=n.length;return n=n.map(function(f){return String(f)}),o>2?"one of ".concat(r," ").concat(n.slice(0,o-1).join(", "),", or ")+n[o-1]:o===2?"one of ".concat(r," ").concat(n[0]," or ").concat(n[1]):"of ".concat(r," ").concat(n[0])}else return"of ".concat(r," ").concat(String(n))}function Kr(n,r,o){return n.substr(!o||o<0?0:+o,r.length)===r}function zr(n,r,o){return(o===void 0||o>n.length)&&(o=n.length),n.substring(o-r.length,o)===r}function Jr(n,r,o){return typeof o!="number"&&(o=0),o+r.length>n.length?!1:n.indexOf(r,o)!==-1}de("ERR_INVALID_OPT_VALUE",function(n,r){return'The value "'+r+'" is invalid for option "'+n+'"'},TypeError);de("ERR_INVALID_ARG_TYPE",function(n,r,o){var f;typeof r=="string"&&Kr(r,"not ")?(f="must not be",r=r.replace(/^not /,"")):f="must be";var h;if(zr(n," argument"))h="The ".concat(n," ").concat(f," ").concat(At(r,"type"));else{var w=Jr(n,".")?"property":"argument";h='The "'.concat(n,'" ').concat(w," ").concat(f," ").concat(At(r,"type"))}return h+=". Received type ".concat(typeof o),h},TypeError);de("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");de("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"});de("ERR_STREAM_PREMATURE_CLOSE","Premature close");de("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"});de("ERR_MULTIPLE_CALLBACK","Callback called multiple times");de("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");de("ERR_STREAM_WRITE_AFTER_END","write after end");de("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);de("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError);de("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");xe.codes=Jt;var Xr=xe.codes.ERR_INVALID_OPT_VALUE;function Zr(n,r,o){return n.highWaterMark!=null?n.highWaterMark:r?n[o]:null}function Qr(n,r,o,f){var h=Zr(r,f,o);if(h!=null){if(!(isFinite(h)&&Math.floor(h)===h)||h<0){var w=f?o:"highWaterMark";throw new Xr(w,h)}return Math.floor(h)}return n.objectMode?16:16*1024}var Xt={getHighWaterMark:Qr},Ce={},It={get exports(){return Ce},set exports(n){Ce=n}};typeof Object.create=="function"?It.exports=function(r,o){o&&(r.super_=o,r.prototype=Object.create(o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:It.exports=function(r,o){if(o){r.super_=o;var f=function(){};f.prototype=o.prototype,r.prototype=new f,r.prototype.constructor=r}};var ei=ti;function ti(n,r){if(at("noDeprecation"))return n;var o=!1;function f(){if(!o){if(at("throwDeprecation"))throw new Error(r);at("traceDeprecation")?console.trace(r):console.warn(r),o=!0}return n.apply(this,arguments)}return f}function at(n){try{if(!we.localStorage)return!1}catch{return!1}var r=we.localStorage[n];return r==null?!1:String(r).toLowerCase()==="true"}var st,Bt;function Zt(){if(Bt)return st;Bt=1,st=q;function n(_){var p=this;this.next=null,this.entry=null,this.finish=function(){Ie(p,_)}}var r;q.WritableState=P;var o={deprecate:ei},f=Kt,h=Oe.Buffer,w=(typeof we<"u"?we:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function E(_){return h.from(_)}function u(_){return h.isBuffer(_)||_ instanceof w}var y=zt,v=Xt,b=v.getHighWaterMark,m=xe.codes,N=m.ERR_INVALID_ARG_TYPE,D=m.ERR_METHOD_NOT_IMPLEMENTED,M=m.ERR_MULTIPLE_CALLBACK,F=m.ERR_STREAM_CANNOT_PIPE,I=m.ERR_STREAM_DESTROYED,d=m.ERR_STREAM_NULL_VALUES,C=m.ERR_STREAM_WRITE_AFTER_END,T=m.ERR_UNKNOWN_ENCODING,A=y.errorOrDestroy;Ce(q,f);function B(){}function P(_,p,x){r=r||Me(),_=_||{},typeof x!="boolean"&&(x=p instanceof r),this.objectMode=!!_.objectMode,x&&(this.objectMode=this.objectMode||!!_.writableObjectMode),this.highWaterMark=b(this,_,"writableHighWaterMark",x),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var k=_.decodeStrings===!1;this.decodeStrings=!k,this.defaultEncoding=_.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function($){ne(p,$)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=_.emitClose!==!1,this.autoDestroy=!!_.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}P.prototype.getBuffer=function(){for(var p=this.bufferedRequest,x=[];p;)x.push(p),p=p.next;return x},function(){try{Object.defineProperty(P.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var K;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(K=Function.prototype[Symbol.hasInstance],Object.defineProperty(q,Symbol.hasInstance,{value:function(p){return K.call(this,p)?!0:this!==q?!1:p&&p._writableState instanceof P}})):K=function(p){return p instanceof this};function q(_){r=r||Me();var p=this instanceof r;if(!p&&!K.call(q,this))return new q(_);this._writableState=new P(_,this,p),this.writable=!0,_&&(typeof _.write=="function"&&(this._write=_.write),typeof _.writev=="function"&&(this._writev=_.writev),typeof _.destroy=="function"&&(this._destroy=_.destroy),typeof _.final=="function"&&(this._final=_.final)),f.call(this)}q.prototype.pipe=function(){A(this,new F)};function U(_,p){var x=new C;A(_,x),process.nextTick(p,x)}function ae(_,p,x,k){var $;return x===null?$=new d:typeof x!="string"&&!p.objectMode&&($=new N("chunk",["string","Buffer"],x)),$?(A(_,$),process.nextTick(k,$),!1):!0}q.prototype.write=function(_,p,x){var k=this._writableState,$=!1,s=!k.objectMode&&u(_);return s&&!h.isBuffer(_)&&(_=E(_)),typeof p=="function"&&(x=p,p=null),s?p="buffer":p||(p=k.defaultEncoding),typeof x!="function"&&(x=B),k.ending?U(this,x):(s||ae(this,k,_,x))&&(k.pendingcb++,$=me(this,k,s,_,p,x)),$},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){var _=this._writableState;_.corked&&(_.corked--,!_.writing&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&pe(this,_))},q.prototype.setDefaultEncoding=function(p){if(typeof p=="string"&&(p=p.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((p+"").toLowerCase())>-1))throw new T(p);return this._writableState.defaultEncoding=p,this},Object.defineProperty(q.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ye(_,p,x){return!_.objectMode&&_.decodeStrings!==!1&&typeof p=="string"&&(p=h.from(p,x)),p}Object.defineProperty(q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function me(_,p,x,k,$,s){if(!x){var l=ye(p,k,$);k!==l&&(x=!0,$="buffer",k=l)}var S=p.objectMode?1:k.length;p.length+=S;var O=p.length<p.highWaterMark;if(O||(p.needDrain=!0),p.writing||p.corked){var Z=p.lastBufferedRequest;p.lastBufferedRequest={chunk:k,encoding:$,isBuf:x,callback:s,next:null},Z?Z.next=p.lastBufferedRequest:p.bufferedRequest=p.lastBufferedRequest,p.bufferedRequestCount+=1}else L(_,p,!1,S,k,$,s);return O}function L(_,p,x,k,$,s,l){p.writelen=k,p.writecb=l,p.writing=!0,p.sync=!0,p.destroyed?p.onwrite(new I("write")):x?_._writev($,p.onwrite):_._write($,s,p.onwrite),p.sync=!1}function j(_,p,x,k,$){--p.pendingcb,x?(process.nextTick($,k),process.nextTick(le,_,p),_._writableState.errorEmitted=!0,A(_,k)):($(k),_._writableState.errorEmitted=!0,A(_,k),le(_,p))}function X(_){_.writing=!1,_.writecb=null,_.length-=_.writelen,_.writelen=0}function ne(_,p){var x=_._writableState,k=x.sync,$=x.writecb;if(typeof $!="function")throw new M;if(X(x),p)j(_,x,k,p,$);else{var s=_e(x)||_.destroyed;!s&&!x.corked&&!x.bufferProcessing&&x.bufferedRequest&&pe(_,x),k?process.nextTick(oe,_,x,s,$):oe(_,x,s,$)}}function oe(_,p,x,k){x||he(_,p),p.pendingcb--,k(),le(_,p)}function he(_,p){p.length===0&&p.needDrain&&(p.needDrain=!1,_.emit("drain"))}function pe(_,p){p.bufferProcessing=!0;var x=p.bufferedRequest;if(_._writev&&x&&x.next){var k=p.bufferedRequestCount,$=new Array(k),s=p.corkedRequestsFree;s.entry=x;for(var l=0,S=!0;x;)$[l]=x,x.isBuf||(S=!1),x=x.next,l+=1;$.allBuffers=S,L(_,p,!0,p.length,$,"",s.finish),p.pendingcb++,p.lastBufferedRequest=null,s.next?(p.corkedRequestsFree=s.next,s.next=null):p.corkedRequestsFree=new n(p),p.bufferedRequestCount=0}else{for(;x;){var O=x.chunk,Z=x.encoding,W=x.callback,G=p.objectMode?1:O.length;if(L(_,p,!1,G,O,Z,W),x=x.next,p.bufferedRequestCount--,p.writing)break}x===null&&(p.lastBufferedRequest=null)}p.bufferedRequest=x,p.bufferProcessing=!1}q.prototype._write=function(_,p,x){x(new D("_write()"))},q.prototype._writev=null,q.prototype.end=function(_,p,x){var k=this._writableState;return typeof _=="function"?(x=_,_=null,p=null):typeof p=="function"&&(x=p,p=null),_!=null&&this.write(_,p),k.corked&&(k.corked=1,this.uncork()),k.ending||Ae(this,k,x),this},Object.defineProperty(q.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function _e(_){return _.ending&&_.length===0&&_.bufferedRequest===null&&!_.finished&&!_.writing}function J(_,p){_._final(function(x){p.pendingcb--,x&&A(_,x),p.prefinished=!0,_.emit("prefinish"),le(_,p)})}function ee(_,p){!p.prefinished&&!p.finalCalled&&(typeof _._final=="function"&&!p.destroyed?(p.pendingcb++,p.finalCalled=!0,process.nextTick(J,_,p)):(p.prefinished=!0,_.emit("prefinish")))}function le(_,p){var x=_e(p);if(x&&(ee(_,p),p.pendingcb===0&&(p.finished=!0,_.emit("finish"),p.autoDestroy))){var k=_._readableState;(!k||k.autoDestroy&&k.endEmitted)&&_.destroy()}return x}function Ae(_,p,x){p.ending=!0,le(_,p),x&&(p.finished?process.nextTick(x):_.once("finish",x)),p.ended=!0,_.writable=!1}function Ie(_,p,x){var k=_.entry;for(_.entry=null;k;){var $=k.callback;p.pendingcb--,$(x),k=k.next}p.corkedRequestsFree.next=_}return Object.defineProperty(q.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(p){this._writableState&&(this._writableState.destroyed=p)}}),q.prototype.destroy=y.destroy,q.prototype._undestroy=y.undestroy,q.prototype._destroy=function(_,p){p(_)},st}var lt,Ft;function Me(){if(Ft)return lt;Ft=1;var n=Object.keys||function(v){var b=[];for(var m in v)b.push(m);return b};lt=E;var r=er(),o=Zt();Ce(E,r);for(var f=n(o.prototype),h=0;h<f.length;h++){var w=f[h];E.prototype[w]||(E.prototype[w]=o.prototype[w])}function E(v){if(!(this instanceof E))return new E(v);r.call(this,v),o.call(this,v),this.allowHalfOpen=!0,v&&(v.readable===!1&&(this.readable=!1),v.writable===!1&&(this.writable=!1),v.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u)))}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function u(){this._writableState.ended||process.nextTick(y,this)}function y(v){v.end()}return Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),lt}var ut={},Nt;function Mt(){if(Nt)return ut;Nt=1;var n=Pe.Buffer,r=n.isEncoding||function(d){switch(d=""+d,d&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(d){if(!d)return"utf8";for(var C;;)switch(d){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return d;default:if(C)return;d=(""+d).toLowerCase(),C=!0}}function f(d){var C=o(d);if(typeof C!="string"&&(n.isEncoding===r||!r(d)))throw new Error("Unknown encoding: "+d);return C||d}ut.StringDecoder=h;function h(d){this.encoding=f(d);var C;switch(this.encoding){case"utf16le":this.text=m,this.end=N,C=4;break;case"utf8":this.fillLast=y,C=4;break;case"base64":this.text=D,this.end=M,C=3;break;default:this.write=F,this.end=I;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(C)}h.prototype.write=function(d){if(d.length===0)return"";var C,T;if(this.lastNeed){if(C=this.fillLast(d),C===void 0)return"";T=this.lastNeed,this.lastNeed=0}else T=0;return T<d.length?C?C+this.text(d,T):this.text(d,T):C||""},h.prototype.end=b,h.prototype.text=v,h.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length};function w(d){return d<=127?0:d>>5===6?2:d>>4===14?3:d>>3===30?4:d>>6===2?-1:-2}function E(d,C,T){var A=C.length-1;if(A<T)return 0;var B=w(C[A]);return B>=0?(B>0&&(d.lastNeed=B-1),B):--A<T||B===-2?0:(B=w(C[A]),B>=0?(B>0&&(d.lastNeed=B-2),B):--A<T||B===-2?0:(B=w(C[A]),B>=0?(B>0&&(B===2?B=0:d.lastNeed=B-3),B):0))}function u(d,C,T){if((C[0]&192)!==128)return d.lastNeed=0,"�";if(d.lastNeed>1&&C.length>1){if((C[1]&192)!==128)return d.lastNeed=1,"�";if(d.lastNeed>2&&C.length>2&&(C[2]&192)!==128)return d.lastNeed=2,"�"}}function y(d){var C=this.lastTotal-this.lastNeed,T=u(this,d);if(T!==void 0)return T;if(this.lastNeed<=d.length)return d.copy(this.lastChar,C,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,C,0,d.length),this.lastNeed-=d.length}function v(d,C){var T=E(this,d,C);if(!this.lastNeed)return d.toString("utf8",C);this.lastTotal=T;var A=d.length-(T-this.lastNeed);return d.copy(this.lastChar,0,A),d.toString("utf8",C,A)}function b(d){var C=d&&d.length?this.write(d):"";return this.lastNeed?C+"�":C}function m(d,C){if((d.length-C)%2===0){var T=d.toString("utf16le",C);if(T){var A=T.charCodeAt(T.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],T.slice(0,-1)}return T}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",C,d.length-1)}function N(d){var C=d&&d.length?this.write(d):"";if(this.lastNeed){var T=this.lastTotal-this.lastNeed;return C+this.lastChar.toString("utf16le",0,T)}return C}function D(d,C){var T=(d.length-C)%3;return T===0?d.toString("base64",C):(this.lastNeed=3-T,this.lastTotal=3,T===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",C,d.length-T))}function M(d){var C=d&&d.length?this.write(d):"";return this.lastNeed?C+this.lastChar.toString("base64",0,3-this.lastNeed):C}function F(d){return d.toString(this.encoding)}function I(d){return d&&d.length?this.write(d):""}return ut}var Ot=xe.codes.ERR_STREAM_PREMATURE_CLOSE;function ri(n){var r=!1;return function(){if(!r){r=!0;for(var o=arguments.length,f=new Array(o),h=0;h<o;h++)f[h]=arguments[h];n.apply(this,f)}}}function ii(){}function ni(n){return n.setHeader&&typeof n.abort=="function"}function Qt(n,r,o){if(typeof r=="function")return Qt(n,null,r);r||(r={}),o=ri(o||ii);var f=r.readable||r.readable!==!1&&n.readable,h=r.writable||r.writable!==!1&&n.writable,w=function(){n.writable||u()},E=n._writableState&&n._writableState.finished,u=function(){h=!1,E=!0,f||o.call(n)},y=n._readableState&&n._readableState.endEmitted,v=function(){f=!1,y=!0,h||o.call(n)},b=function(M){o.call(n,M)},m=function(){var M;if(f&&!y)return(!n._readableState||!n._readableState.ended)&&(M=new Ot),o.call(n,M);if(h&&!E)return(!n._writableState||!n._writableState.ended)&&(M=new Ot),o.call(n,M)},N=function(){n.req.on("finish",u)};return ni(n)?(n.on("complete",u),n.on("abort",m),n.req?N():n.on("request",N)):h&&!n._writableState&&(n.on("end",w),n.on("close",w)),n.on("end",v),n.on("finish",u),r.error!==!1&&n.on("error",b),n.on("close",m),function(){n.removeListener("complete",u),n.removeListener("abort",m),n.removeListener("request",N),n.req&&n.req.removeListener("finish",u),n.removeListener("end",w),n.removeListener("close",w),n.removeListener("finish",u),n.removeListener("end",v),n.removeListener("error",b),n.removeListener("close",m)}}var bt=Qt,ft,Dt;function oi(){if(Dt)return ft;Dt=1;var n;function r(T,A,B){return A=o(A),A in T?Object.defineProperty(T,A,{value:B,enumerable:!0,configurable:!0,writable:!0}):T[A]=B,T}function o(T){var A=f(T,"string");return typeof A=="symbol"?A:String(A)}function f(T,A){if(typeof T!="object"||T===null)return T;var B=T[Symbol.toPrimitive];if(B!==void 0){var P=B.call(T,A||"default");if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(T)}var h=bt,w=Symbol("lastResolve"),E=Symbol("lastReject"),u=Symbol("error"),y=Symbol("ended"),v=Symbol("lastPromise"),b=Symbol("handlePromise"),m=Symbol("stream");function N(T,A){return{value:T,done:A}}function D(T){var A=T[w];if(A!==null){var B=T[m].read();B!==null&&(T[v]=null,T[w]=null,T[E]=null,A(N(B,!1)))}}function M(T){process.nextTick(D,T)}function F(T,A){return function(B,P){T.then(function(){if(A[y]){B(N(void 0,!0));return}A[b](B,P)},P)}}var I=Object.getPrototypeOf(function(){}),d=Object.setPrototypeOf((n={get stream(){return this[m]},next:function(){var A=this,B=this[u];if(B!==null)return Promise.reject(B);if(this[y])return Promise.resolve(N(void 0,!0));if(this[m].destroyed)return new Promise(function(U,ae){process.nextTick(function(){A[u]?ae(A[u]):U(N(void 0,!0))})});var P=this[v],K;if(P)K=new Promise(F(P,this));else{var q=this[m].read();if(q!==null)return Promise.resolve(N(q,!1));K=new Promise(this[b])}return this[v]=K,K}},r(n,Symbol.asyncIterator,function(){return this}),r(n,"return",function(){var A=this;return new Promise(function(B,P){A[m].destroy(null,function(K){if(K){P(K);return}B(N(void 0,!0))})})}),n),I),C=function(A){var B,P=Object.create(d,(B={},r(B,m,{value:A,writable:!0}),r(B,w,{value:null,writable:!0}),r(B,E,{value:null,writable:!0}),r(B,u,{value:null,writable:!0}),r(B,y,{value:A._readableState.endEmitted,writable:!0}),r(B,b,{value:function(q,U){var ae=P[m].read();ae?(P[v]=null,P[w]=null,P[E]=null,q(N(ae,!1))):(P[w]=q,P[E]=U)},writable:!0}),B));return P[v]=null,h(A,function(K){if(K&&K.code!=="ERR_STREAM_PREMATURE_CLOSE"){var q=P[E];q!==null&&(P[v]=null,P[w]=null,P[E]=null,q(K)),P[u]=K;return}var U=P[w];U!==null&&(P[v]=null,P[w]=null,P[E]=null,U(N(void 0,!0))),P[y]=!0}),A.on("readable",M.bind(null,P)),P};return ft=C,ft}var ct,Lt;function ai(){return Lt||(Lt=1,ct=function(){throw new Error("Readable.from is not available in the browser")}),ct}var dt,kt;function er(){if(kt)return dt;kt=1,dt=U;var n;U.ReadableState=q,Ve.EventEmitter;var r=function(l,S){return l.listeners(S).length},o=Kt,f=Oe.Buffer,h=(typeof we<"u"?we:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function w(s){return f.from(s)}function E(s){return f.isBuffer(s)||s instanceof h}var u=Ve,y;u&&u.debuglog?y=u.debuglog("stream"):y=function(){};var v=Wr(),b=zt,m=Xt,N=m.getHighWaterMark,D=xe.codes,M=D.ERR_INVALID_ARG_TYPE,F=D.ERR_STREAM_PUSH_AFTER_EOF,I=D.ERR_METHOD_NOT_IMPLEMENTED,d=D.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,C,T,A;Ce(U,o);var B=b.errorOrDestroy,P=["error","close","destroy","pause","resume"];function K(s,l,S){if(typeof s.prependListener=="function")return s.prependListener(l,S);!s._events||!s._events[l]?s.on(l,S):Array.isArray(s._events[l])?s._events[l].unshift(S):s._events[l]=[S,s._events[l]]}function q(s,l,S){n=n||Me(),s=s||{},typeof S!="boolean"&&(S=l instanceof n),this.objectMode=!!s.objectMode,S&&(this.objectMode=this.objectMode||!!s.readableObjectMode),this.highWaterMark=N(this,s,"readableHighWaterMark",S),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=s.emitClose!==!1,this.autoDestroy=!!s.autoDestroy,this.destroyed=!1,this.defaultEncoding=s.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,s.encoding&&(C||(C=Mt().StringDecoder),this.decoder=new C(s.encoding),this.encoding=s.encoding)}function U(s){if(n=n||Me(),!(this instanceof U))return new U(s);var l=this instanceof n;this._readableState=new q(s,this,l),this.readable=!0,s&&(typeof s.read=="function"&&(this._read=s.read),typeof s.destroy=="function"&&(this._destroy=s.destroy)),o.call(this)}Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(l){this._readableState&&(this._readableState.destroyed=l)}}),U.prototype.destroy=b.destroy,U.prototype._undestroy=b.undestroy,U.prototype._destroy=function(s,l){l(s)},U.prototype.push=function(s,l){var S=this._readableState,O;return S.objectMode?O=!0:typeof s=="string"&&(l=l||S.defaultEncoding,l!==S.encoding&&(s=f.from(s,l),l=""),O=!0),ae(this,s,l,!1,O)},U.prototype.unshift=function(s){return ae(this,s,null,!0,!1)};function ae(s,l,S,O,Z){y("readableAddChunk",l);var W=s._readableState;if(l===null)W.reading=!1,ne(s,W);else{var G;if(Z||(G=me(W,l)),G)B(s,G);else if(W.objectMode||l&&l.length>0)if(typeof l!="string"&&!W.objectMode&&Object.getPrototypeOf(l)!==f.prototype&&(l=w(l)),O)W.endEmitted?B(s,new d):ye(s,W,l,!0);else if(W.ended)B(s,new F);else{if(W.destroyed)return!1;W.reading=!1,W.decoder&&!S?(l=W.decoder.write(l),W.objectMode||l.length!==0?ye(s,W,l,!1):pe(s,W)):ye(s,W,l,!1)}else O||(W.reading=!1,pe(s,W))}return!W.ended&&(W.length<W.highWaterMark||W.length===0)}function ye(s,l,S,O){l.flowing&&l.length===0&&!l.sync?(l.awaitDrain=0,s.emit("data",S)):(l.length+=l.objectMode?1:S.length,O?l.buffer.unshift(S):l.buffer.push(S),l.needReadable&&oe(s)),pe(s,l)}function me(s,l){var S;return!E(l)&&typeof l!="string"&&l!==void 0&&!s.objectMode&&(S=new M("chunk",["string","Buffer","Uint8Array"],l)),S}U.prototype.isPaused=function(){return this._readableState.flowing===!1},U.prototype.setEncoding=function(s){C||(C=Mt().StringDecoder);var l=new C(s);this._readableState.decoder=l,this._readableState.encoding=this._readableState.decoder.encoding;for(var S=this._readableState.buffer.head,O="";S!==null;)O+=l.write(S.data),S=S.next;return this._readableState.buffer.clear(),O!==""&&this._readableState.buffer.push(O),this._readableState.length=O.length,this};var L=1073741824;function j(s){return s>=L?s=L:(s--,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s++),s}function X(s,l){return s<=0||l.length===0&&l.ended?0:l.objectMode?1:s!==s?l.flowing&&l.length?l.buffer.head.data.length:l.length:(s>l.highWaterMark&&(l.highWaterMark=j(s)),s<=l.length?s:l.ended?l.length:(l.needReadable=!0,0))}U.prototype.read=function(s){y("read",s),s=parseInt(s,10);var l=this._readableState,S=s;if(s!==0&&(l.emittedReadable=!1),s===0&&l.needReadable&&((l.highWaterMark!==0?l.length>=l.highWaterMark:l.length>0)||l.ended))return y("read: emitReadable",l.length,l.ended),l.length===0&&l.ended?x(this):oe(this),null;if(s=X(s,l),s===0&&l.ended)return l.length===0&&x(this),null;var O=l.needReadable;y("need readable",O),(l.length===0||l.length-s<l.highWaterMark)&&(O=!0,y("length less than watermark",O)),l.ended||l.reading?(O=!1,y("reading or ended",O)):O&&(y("do read"),l.reading=!0,l.sync=!0,l.length===0&&(l.needReadable=!0),this._read(l.highWaterMark),l.sync=!1,l.reading||(s=X(S,l)));var Z;return s>0?Z=p(s,l):Z=null,Z===null?(l.needReadable=l.length<=l.highWaterMark,s=0):(l.length-=s,l.awaitDrain=0),l.length===0&&(l.ended||(l.needReadable=!0),S!==s&&l.ended&&x(this)),Z!==null&&this.emit("data",Z),Z};function ne(s,l){if(y("onEofChunk"),!l.ended){if(l.decoder){var S=l.decoder.end();S&&S.length&&(l.buffer.push(S),l.length+=l.objectMode?1:S.length)}l.ended=!0,l.sync?oe(s):(l.needReadable=!1,l.emittedReadable||(l.emittedReadable=!0,he(s)))}}function oe(s){var l=s._readableState;y("emitReadable",l.needReadable,l.emittedReadable),l.needReadable=!1,l.emittedReadable||(y("emitReadable",l.flowing),l.emittedReadable=!0,process.nextTick(he,s))}function he(s){var l=s._readableState;y("emitReadable_",l.destroyed,l.length,l.ended),!l.destroyed&&(l.length||l.ended)&&(s.emit("readable"),l.emittedReadable=!1),l.needReadable=!l.flowing&&!l.ended&&l.length<=l.highWaterMark,_(s)}function pe(s,l){l.readingMore||(l.readingMore=!0,process.nextTick(_e,s,l))}function _e(s,l){for(;!l.reading&&!l.ended&&(l.length<l.highWaterMark||l.flowing&&l.length===0);){var S=l.length;if(y("maybeReadMore read 0"),s.read(0),S===l.length)break}l.readingMore=!1}U.prototype._read=function(s){B(this,new I("_read()"))},U.prototype.pipe=function(s,l){var S=this,O=this._readableState;switch(O.pipesCount){case 0:O.pipes=s;break;case 1:O.pipes=[O.pipes,s];break;default:O.pipes.push(s);break}O.pipesCount+=1,y("pipe count=%d opts=%j",O.pipesCount,l);var Z=(!l||l.end!==!1)&&s!==process.stdout&&s!==process.stderr,W=Z?Ee:ve;O.endEmitted?process.nextTick(W):S.once("end",W),s.on("unpipe",G);function G(i,e){y("onunpipe"),i===S&&e&&e.hasUnpiped===!1&&(e.hasUnpiped=!0,Fe())}function Ee(){y("onend"),s.end()}var Be=J(S);s.on("drain",Be);var De=!1;function Fe(){y("cleanup"),s.removeListener("close",Le),s.removeListener("finish",ue),s.removeListener("drain",Be),s.removeListener("error",Re),s.removeListener("unpipe",G),S.removeListener("end",Ee),S.removeListener("end",ve),S.removeListener("data",se),De=!0,O.awaitDrain&&(!s._writableState||s._writableState.needDrain)&&Be()}S.on("data",se);function se(i){y("ondata");var e=s.write(i);y("dest.write",e),e===!1&&((O.pipesCount===1&&O.pipes===s||O.pipesCount>1&&$(O.pipes,s)!==-1)&&!De&&(y("false write response, pause",O.awaitDrain),O.awaitDrain++),S.pause())}function Re(i){y("onerror",i),ve(),s.removeListener("error",Re),r(s,"error")===0&&B(s,i)}K(s,"error",Re);function Le(){s.removeListener("finish",ue),ve()}s.once("close",Le);function ue(){y("onfinish"),s.removeListener("close",Le),ve()}s.once("finish",ue);function ve(){y("unpipe"),S.unpipe(s)}return s.emit("pipe",S),O.flowing||(y("pipe resume"),S.resume()),s};function J(s){return function(){var S=s._readableState;y("pipeOnDrain",S.awaitDrain),S.awaitDrain&&S.awaitDrain--,S.awaitDrain===0&&r(s,"data")&&(S.flowing=!0,_(s))}}U.prototype.unpipe=function(s){var l=this._readableState,S={hasUnpiped:!1};if(l.pipesCount===0)return this;if(l.pipesCount===1)return s&&s!==l.pipes?this:(s||(s=l.pipes),l.pipes=null,l.pipesCount=0,l.flowing=!1,s&&s.emit("unpipe",this,S),this);if(!s){var O=l.pipes,Z=l.pipesCount;l.pipes=null,l.pipesCount=0,l.flowing=!1;for(var W=0;W<Z;W++)O[W].emit("unpipe",this,{hasUnpiped:!1});return this}var G=$(l.pipes,s);return G===-1?this:(l.pipes.splice(G,1),l.pipesCount-=1,l.pipesCount===1&&(l.pipes=l.pipes[0]),s.emit("unpipe",this,S),this)},U.prototype.on=function(s,l){var S=o.prototype.on.call(this,s,l),O=this._readableState;return s==="data"?(O.readableListening=this.listenerCount("readable")>0,O.flowing!==!1&&this.resume()):s==="readable"&&!O.endEmitted&&!O.readableListening&&(O.readableListening=O.needReadable=!0,O.flowing=!1,O.emittedReadable=!1,y("on readable",O.length,O.reading),O.length?oe(this):O.reading||process.nextTick(le,this)),S},U.prototype.addListener=U.prototype.on,U.prototype.removeListener=function(s,l){var S=o.prototype.removeListener.call(this,s,l);return s==="readable"&&process.nextTick(ee,this),S},U.prototype.removeAllListeners=function(s){var l=o.prototype.removeAllListeners.apply(this,arguments);return(s==="readable"||s===void 0)&&process.nextTick(ee,this),l};function ee(s){var l=s._readableState;l.readableListening=s.listenerCount("readable")>0,l.resumeScheduled&&!l.paused?l.flowing=!0:s.listenerCount("data")>0&&s.resume()}function le(s){y("readable nexttick read 0"),s.read(0)}U.prototype.resume=function(){var s=this._readableState;return s.flowing||(y("resume"),s.flowing=!s.readableListening,Ae(this,s)),s.paused=!1,this};function Ae(s,l){l.resumeScheduled||(l.resumeScheduled=!0,process.nextTick(Ie,s,l))}function Ie(s,l){y("resume",l.reading),l.reading||s.read(0),l.resumeScheduled=!1,s.emit("resume"),_(s),l.flowing&&!l.reading&&s.read(0)}U.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function _(s){var l=s._readableState;for(y("flow",l.flowing);l.flowing&&s.read()!==null;);}U.prototype.wrap=function(s){var l=this,S=this._readableState,O=!1;s.on("end",function(){if(y("wrapped end"),S.decoder&&!S.ended){var G=S.decoder.end();G&&G.length&&l.push(G)}l.push(null)}),s.on("data",function(G){if(y("wrapped data"),S.decoder&&(G=S.decoder.write(G)),!(S.objectMode&&G==null)&&!(!S.objectMode&&(!G||!G.length))){var Ee=l.push(G);Ee||(O=!0,s.pause())}});for(var Z in s)this[Z]===void 0&&typeof s[Z]=="function"&&(this[Z]=function(Ee){return function(){return s[Ee].apply(s,arguments)}}(Z));for(var W=0;W<P.length;W++)s.on(P[W],this.emit.bind(this,P[W]));return this._read=function(G){y("wrapped _read",G),O&&(O=!1,s.resume())},this},typeof Symbol=="function"&&(U.prototype[Symbol.asyncIterator]=function(){return T===void 0&&(T=oi()),T(this)}),Object.defineProperty(U.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(U.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(U.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(l){this._readableState&&(this._readableState.flowing=l)}}),U._fromList=p,Object.defineProperty(U.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function p(s,l){if(l.length===0)return null;var S;return l.objectMode?S=l.buffer.shift():!s||s>=l.length?(l.decoder?S=l.buffer.join(""):l.buffer.length===1?S=l.buffer.first():S=l.buffer.concat(l.length),l.buffer.clear()):S=l.buffer.consume(s,l.decoder),S}function x(s){var l=s._readableState;y("endReadable",l.endEmitted),l.endEmitted||(l.ended=!0,process.nextTick(k,l,s))}function k(s,l){if(y("endReadableNT",s.endEmitted,s.length),!s.endEmitted&&s.length===0&&(s.endEmitted=!0,l.readable=!1,l.emit("end"),s.autoDestroy)){var S=l._writableState;(!S||S.autoDestroy&&S.finished)&&l.destroy()}}typeof Symbol=="function"&&(U.from=function(s,l){return A===void 0&&(A=ai()),A(U,s,l)});function $(s,l){for(var S=0,O=s.length;S<O;S++)if(s[S]===l)return S;return-1}return dt}var tr=be,Xe=xe.codes,si=Xe.ERR_METHOD_NOT_IMPLEMENTED,li=Xe.ERR_MULTIPLE_CALLBACK,ui=Xe.ERR_TRANSFORM_ALREADY_TRANSFORMING,fi=Xe.ERR_TRANSFORM_WITH_LENGTH_0,Ze=Me();Ce(be,Ze);function ci(n,r){var o=this._transformState;o.transforming=!1;var f=o.writecb;if(f===null)return this.emit("error",new li);o.writechunk=null,o.writecb=null,r!=null&&this.push(r),f(n);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function be(n){if(!(this instanceof be))return new be(n);Ze.call(this,n),this._transformState={afterTransform:ci.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",di)}function di(){var n=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(r,o){Pt(n,r,o)}):Pt(this,null,null)}be.prototype.push=function(n,r){return this._transformState.needTransform=!1,Ze.prototype.push.call(this,n,r)};be.prototype._transform=function(n,r,o){o(new si("_transform()"))};be.prototype._write=function(n,r,o){var f=this._transformState;if(f.writecb=o,f.writechunk=n,f.writeencoding=r,!f.transforming){var h=this._readableState;(f.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}};be.prototype._read=function(n){var r=this._transformState;r.writechunk!==null&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};be.prototype._destroy=function(n,r){Ze.prototype._destroy.call(this,n,function(o){r(o)})};function Pt(n,r,o){if(r)return n.emit("error",r);if(o!=null&&n.push(o),n._writableState.length)throw new fi;if(n._transformState.transforming)throw new ui;return n.push(null)}var hi=Ue,rr=tr;Ce(Ue,rr);function Ue(n){if(!(this instanceof Ue))return new Ue(n);rr.call(this,n)}Ue.prototype._transform=function(n,r,o){o(null,n)};var ht;function pi(n){var r=!1;return function(){r||(r=!0,n.apply(void 0,arguments))}}var ir=xe.codes,gi=ir.ERR_MISSING_ARGS,yi=ir.ERR_STREAM_DESTROYED;function Ut(n){if(n)throw n}function _i(n){return n.setHeader&&typeof n.abort=="function"}function wi(n,r,o,f){f=pi(f);var h=!1;n.on("close",function(){h=!0}),ht===void 0&&(ht=bt),ht(n,{readable:r,writable:o},function(E){if(E)return f(E);h=!0,f()});var w=!1;return function(E){if(!h&&!w){if(w=!0,_i(n))return n.abort();if(typeof n.destroy=="function")return n.destroy();f(E||new yi("pipe"))}}}function jt(n){n()}function bi(n,r){return n.pipe(r)}function Ei(n){return!n.length||typeof n[n.length-1]!="function"?Ut:n.pop()}function mi(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var f=Ei(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new gi("streams");var h,w=r.map(function(E,u){var y=u<r.length-1,v=u>0;return wi(E,y,v,function(b){h||(h=b),b&&w.forEach(jt),!y&&(w.forEach(jt),f(h))})});return r.reduce(bi)}var Ri=mi;(function(n,r){r=n.exports=er(),r.Stream=r,r.Readable=r,r.Writable=Zt(),r.Duplex=Me(),r.Transform=tr,r.PassThrough=hi,r.finished=bt,r.pipeline=Ri})(jr,He);/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let qt;var vi=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:we):n=>(qt||(qt=Promise.resolve())).then(n).catch(r=>setTimeout(()=>{throw r},0));function $t(n,r){for(const o in r)Object.defineProperty(n,o,{value:r[o],enumerable:!0,configurable:!0});return n}function Si(n,r,o){if(!n||typeof n=="string")throw new TypeError("Please pass an Error to err-code");o||(o={}),typeof r=="object"&&(o=r,r=""),r&&(o.code=r);try{return $t(n,o)}catch{o.message=n.message,o.stack=n.stack;const h=function(){};return h.prototype=Object.create(Object.getPrototypeOf(n)),$t(new h,o)}}var Ci=Si;/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const Ti=$e("simple-peer"),nr=Tr,Wt=yt,xi=He,pt=vi,V=Ci,{Buffer:Ai}=Oe,gt=64*1024,Ii=5*1e3,Bi=5*1e3;function Ht(n){return n.replace(/a=ice-options:trickle\s\n/g,"")}function Fi(n){console.warn(n)}class Te extends xi.Duplex{constructor(r){if(r=Object.assign({allowHalfOpen:!1},r),super(r),this._id=Wt(4).toString("hex").slice(0,7),this._debug("new peer %o",r),this.channelName=r.initiator?r.channelName||Wt(20).toString("hex"):null,this.initiator=r.initiator||!1,this.channelConfig=r.channelConfig||Te.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Te.config,r.config),this.offerOptions=r.offerOptions||{},this.answerOptions=r.answerOptions||{},this.sdpTransform=r.sdpTransform||(o=>o),this.streams=r.streams||(r.stream?[r.stream]:[]),this.trickle=r.trickle!==void 0?r.trickle:!0,this.allowHalfTrickle=r.allowHalfTrickle!==void 0?r.allowHalfTrickle:!1,this.iceCompleteTimeout=r.iceCompleteTimeout||Ii,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=r.wrtc&&typeof r.wrtc=="object"?r.wrtc:nr(),!this._wrtc)throw V(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(o){this.destroy(V(o,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=o=>{this._onIceCandidate(o)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(o=>{this.destroy(V(o,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=o=>{this._setupData(o)},this.streams&&this.streams.forEach(o=>{this.addStream(o)}),this._pc.ontrack=o=>{this._onTrack(o)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(r){if(!this.destroying){if(this.destroyed)throw V(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof r=="string")try{r=JSON.parse(r)}catch{r={}}this._debug("signal()"),r.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),r.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(r.transceiverRequest.kind,r.transceiverRequest.init)),r.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(r.candidate):this._pendingCandidates.push(r.candidate)),r.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(r)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(o=>{this._addIceCandidate(o)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(o=>{this.destroy(V(o,"ERR_SET_REMOTE_DESCRIPTION"))}),!r.sdp&&!r.candidate&&!r.renegotiate&&!r.transceiverRequest&&this.destroy(V(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(r){const o=new this._wrtc.RTCIceCandidate(r);this._pc.addIceCandidate(o).catch(f=>{!o.address||o.address.endsWith(".local")?Fi("Ignoring unsupported ICE candidate."):this.destroy(V(f,"ERR_ADD_ICE_CANDIDATE"))})}send(r){if(!this.destroying){if(this.destroyed)throw V(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(r)}}addTransceiver(r,o){if(!this.destroying){if(this.destroyed)throw V(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(r,o),this._needsNegotiation()}catch(f){this.destroy(V(f,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:r,init:o}})}}addStream(r){if(!this.destroying){if(this.destroyed)throw V(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),r.getTracks().forEach(o=>{this.addTrack(o,r)})}}addTrack(r,o){if(this.destroying)return;if(this.destroyed)throw V(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const f=this._senderMap.get(r)||new Map;let h=f.get(o);if(!h)h=this._pc.addTrack(r,o),f.set(o,h),this._senderMap.set(r,f),this._needsNegotiation();else throw h.removed?V(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):V(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(r,o,f){if(this.destroying)return;if(this.destroyed)throw V(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const h=this._senderMap.get(r),w=h?h.get(f):null;if(!w)throw V(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");o&&this._senderMap.set(o,h),w.replaceTrack!=null?w.replaceTrack(o):this.destroy(V(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(r,o){if(this.destroying)return;if(this.destroyed)throw V(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const f=this._senderMap.get(r),h=f?f.get(o):null;if(!h)throw V(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{h.removed=!0,this._pc.removeTrack(h)}catch(w){w.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(h):this.destroy(V(w,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(r){if(!this.destroying){if(this.destroyed)throw V(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),r.getTracks().forEach(o=>{this.removeTrack(o,r)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,pt(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw V(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(r){this._destroy(r,()=>{})}_destroy(r,o){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",r&&(r.message||r)),pt(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",r&&(r.message||r)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,r&&this.emit("error",r),this.emit("close"),o()}))}_setupData(r){if(!r.channel)return this.destroy(V(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=r.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=gt),this.channelName=this._channel.label,this._channel.onmessage=f=>{this._onChannelMessage(f)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=f=>{const h=f.error instanceof Error?f.error:new Error(`Datachannel error: ${f.message} ${f.filename}:${f.lineno}:${f.colno}`);this.destroy(V(h,"ERR_DATA_CHANNEL"))};let o=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(o&&this._onChannelClose(),o=!0):o=!1},Bi)}_read(){}_write(r,o,f){if(this.destroyed)return f(V(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(r)}catch(h){return this.destroy(V(h,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>gt?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=f):f(null)}else this._debug("write before connect"),this._chunk=r,this._cb=f}_onFinish(){if(this.destroyed)return;const r=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?r():this.once("connect",r)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(r=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(r.sdp=Ht(r.sdp)),r.sdp=this.sdpTransform(r.sdp);const o=()=>{if(this.destroyed)return;const w=this._pc.localDescription||r;this._debug("signal"),this.emit("signal",{type:w.type,sdp:w.sdp})},f=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?o():this.once("_iceComplete",o))},h=w=>{this.destroy(V(w,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(r).then(f).catch(h)}).catch(r=>{this.destroy(V(r,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(r=>{!r.mid&&r.sender.track&&!r.requested&&(r.requested=!0,this.addTransceiver(r.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(r=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(r.sdp=Ht(r.sdp)),r.sdp=this.sdpTransform(r.sdp);const o=()=>{if(this.destroyed)return;const w=this._pc.localDescription||r;this._debug("signal"),this.emit("signal",{type:w.type,sdp:w.sdp}),this.initiator||this._requestMissingTransceivers()},f=()=>{this.destroyed||(this.trickle||this._iceComplete?o():this.once("_iceComplete",o))},h=w=>{this.destroy(V(w,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(r).then(f).catch(h)}).catch(r=>{this.destroy(V(r,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(V(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const r=this._pc.iceConnectionState,o=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",r,o),this.emit("iceStateChange",r,o),(r==="connected"||r==="completed")&&(this._pcReady=!0,this._maybeReady()),r==="failed"&&this.destroy(V(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),r==="closed"&&this.destroy(V(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(r){const o=f=>(Object.prototype.toString.call(f.values)==="[object Array]"&&f.values.forEach(h=>{Object.assign(f,h)}),f);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(f=>{const h=[];f.forEach(w=>{h.push(o(w))}),r(null,h)},f=>r(f)):this._pc.getStats.length>0?this._pc.getStats(f=>{if(this.destroyed)return;const h=[];f.result().forEach(w=>{const E={};w.names().forEach(u=>{E[u]=w.stat(u)}),E.id=w.id,E.type=w.type,E.timestamp=w.timestamp,h.push(o(E))}),r(null,h)},f=>r(f)):r(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const r=()=>{this.destroyed||this.getStats((o,f)=>{if(this.destroyed)return;o&&(f=[]);const h={},w={},E={};let u=!1;f.forEach(v=>{(v.type==="remotecandidate"||v.type==="remote-candidate")&&(h[v.id]=v),(v.type==="localcandidate"||v.type==="local-candidate")&&(w[v.id]=v),(v.type==="candidatepair"||v.type==="candidate-pair")&&(E[v.id]=v)});const y=v=>{u=!0;let b=w[v.localCandidateId];b&&(b.ip||b.address)?(this.localAddress=b.ip||b.address,this.localPort=Number(b.port)):b&&b.ipAddress?(this.localAddress=b.ipAddress,this.localPort=Number(b.portNumber)):typeof v.googLocalAddress=="string"&&(b=v.googLocalAddress.split(":"),this.localAddress=b[0],this.localPort=Number(b[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let m=h[v.remoteCandidateId];m&&(m.ip||m.address)?(this.remoteAddress=m.ip||m.address,this.remotePort=Number(m.port)):m&&m.ipAddress?(this.remoteAddress=m.ipAddress,this.remotePort=Number(m.portNumber)):typeof v.googRemoteAddress=="string"&&(m=v.googRemoteAddress.split(":"),this.remoteAddress=m[0],this.remotePort=Number(m[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(f.forEach(v=>{v.type==="transport"&&v.selectedCandidatePairId&&y(E[v.selectedCandidatePairId]),(v.type==="googCandidatePair"&&v.googActiveConnection==="true"||(v.type==="candidatepair"||v.type==="candidate-pair")&&v.selected)&&y(v)}),!u&&(!Object.keys(E).length||Object.keys(w).length)){setTimeout(r,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(b){return this.destroy(V(b,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const v=this._cb;this._cb=null,v(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};r()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>gt||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(r=>{this._pc.removeTrack(r),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(r){this.destroyed||(r.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:r.candidate.candidate,sdpMLineIndex:r.candidate.sdpMLineIndex,sdpMid:r.candidate.sdpMid}}):!r.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),r.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(r){if(this.destroyed)return;let o=r.data;o instanceof ArrayBuffer&&(o=Ai.from(o)),this.push(o)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const r=this._cb;this._cb=null,r(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(r){this.destroyed||r.streams.forEach(o=>{this._debug("on track"),this.emit("track",r.track,o),this._remoteTracks.push({track:r.track,stream:o}),!this._remoteStreams.some(f=>f.id===o.id)&&(this._remoteStreams.push(o),pt(()=>{this._debug("on stream"),this.emit("stream",o)}))})}_debug(){const r=[].slice.call(arguments);r[0]="["+this._id+"] "+r[0],Ti.apply(null,r)}}Te.WEBRTC_SUPPORT=!!nr();Te.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};Te.channelConfig={};var Vt=Te,Et={},Ni=Ke;Object.defineProperty(Et,"__esModule",{value:!0});var Ge=Et.default=void 0,Mi=Ni(Ye()),Oi=ze,Di=(0,Mi.default)((0,Oi.jsx)("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"}),"MicOff");Ge=Et.default=Di;const Li=te.memo(({val:n})=>{const r=te.useRef(null),{peer:o,user:f,audio:h,video:w}=n,[E,u]=te.useState(),[y,v]=te.useState(!0),[b,m]=te.useState(!0);te.useEffect(()=>{E&&(E.getAudioTracks().forEach(D=>{D.enabled=y}),E.getVideoTracks().forEach(D=>{D.enabled=b}))},[y,b,E]),te.useEffect(()=>{v(h),m(w)},[h,w]);const N=te.useRef(null);return E||o.on("stream",D=>{r.current&&(r.current.srcObject=D,u(D))}),te.useEffect(()=>{o.on("data",D=>{const M=new TextDecoder("utf-8").decode(D),F=JSON.parse(M);"audio"in F?v(F.audio):"video"in F?m(F.video):N.current&&"isSpeaking"in F&&(F.isSpeaking?N.current.classList.add("is-speaking"):N.current.classList.remove("is-speaking"))})},[]),Se(ce,{sx:{width:"100%",display:"flex",justifyContent:"center",mb:1},children:[Se(ce,{sx:{position:"relative",height:"max-content",width:"max-content",display:b?"block":"none"},children:[Y(ce,{component:"video",autoPlay:!0,playsInline:!0,ref:r,sx:{borderRadius:"15px",height:{xs:void 0,md:"300px"}}}),!y&&Y(Ge,{sx:{fill:"white",position:"absolute",bottom:"10px",left:"10px"}})]}),!b&&Se(ce,{ref:N,sx:{backgroundColor:"lightgrey",display:"flex",justifyContent:"center",position:"relative",alignItems:"center",borderRadius:"15px",width:"80%",height:"200px"},children:[Y(Gt,{user:f,avatarSx:{width:56,height:56}}),!y&&Y(ke,{title:`${f.firstname} ${f.lastname} a coupé son micro`,children:Y(Ge,{sx:{fill:"white",position:"absolute",bottom:"10px",left:"10px"}})})]})]})});var mt={},ki=Ke;Object.defineProperty(mt,"__esModule",{value:!0});var or=mt.default=void 0,Pi=ki(Ye()),Ui=ze,ji=(0,Pi.default)((0,Ui.jsx)("path",{d:"M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),"KeyboardVoice");or=mt.default=ji;var Rt={},qi=Ke;Object.defineProperty(Rt,"__esModule",{value:!0});var ar=Rt.default=void 0,$i=qi(Ye()),Wi=ze,Hi=(0,$i.default)((0,Wi.jsx)("path",{d:"M21 3H3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h18c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 16.02H3V4.98h18v14.04zM10 12H8l4-4 4 4h-2v4h-4v-4z"}),"PresentToAll");ar=Rt.default=Hi;var vt={},Vi=Ke;Object.defineProperty(vt,"__esModule",{value:!0});var sr=vt.default=void 0,Gi=Vi(Ye()),Yi=ze,Ki=(0,Gi.default)((0,Yi.jsx)("path",{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"}),"VideocamOff");sr=vt.default=Ki;const zi="/subscription-graphql/assets/group-video-144eb578.png",Zi=()=>{const n=ur(),{user:r,dispatchSnack:o}=fr(),[f,h]=te.useState(!0),[w,E]=te.useState(!0),u=te.useRef(null),y=te.useRef([]),v=te.useRef(null),b=te.useMemo(()=>n.search.split("=")[1],[n.search]),[m,N]=te.useState(0),[D,M]=te.useState([]),[F]=Qe(br),[I]=Qe(Er),{data:d}=et(cr,{variables:{userId:r==null?void 0:r.id},skip:!(r!=null&&r.id)}),[C]=Qe(mr),{data:T}=et(dr,{variables:{userId:r==null?void 0:r.id},skip:!(r!=null&&r.id)}),{data:A}=et(hr,{variables:{userId:r==null?void 0:r.id},skip:!(r!=null&&r.id)}),{data:B,error:P}=pr(gr,{variables:{token:b,userId:r==null?void 0:r.id},skip:!(r!=null&&r.id)||!b}),K=(L,j,X)=>{const ne=new Vt({initiator:!0,trickle:!1,stream:L});return ne.on("signal",async oe=>{await F({variables:{signal:JSON.stringify(oe),audio:w,video:f,receiverId:X,userId:j}})}),ne},q=(L,j,X,ne)=>{const oe=new Vt({initiator:!1,trickle:!1,stream:j});return oe.on("signal",async he=>{await C({variables:{signal:JSON.stringify(he),audio:w,video:f,receiverId:ne,userId:X}})}),console.log("connect send signal"),oe.signal(JSON.parse(L)),oe};if(te.useEffect(()=>{const L=async()=>{r&&await I({variables:{userId:r.id,token:b}})};return window.addEventListener("beforeunload",L),()=>{window.removeEventListener("beforeunload",L)}},[r,b]),te.useEffect(()=>{d&&(y.current=[...y.current].filter(L=>L.user.id!==d.lisenLeaveCall.id),M(L=>L.filter(j=>j.user.id!==d.lisenLeaveCall.id)),o({open:!0,severity:"info",message:`${d.lisenLeaveCall.firstname} ${d.lisenLeaveCall.lastname}`,subtitle:"a quitté le call",withImage:!0,photo:d.lisenLeaveCall.photo??void 0}))},[d]),te.useEffect(()=>{if(A&&y.current.find(L=>L.user.id===A.lisenReturnSignal.receiverId)){console.log("listenReturn Signal");const L=D.findIndex(j=>j.user.id===A.lisenReturnSignal.receiverId);L!==-1&&D[L].peer.signal(JSON.parse(A.lisenReturnSignal.signal)),M(j=>j.map(X=>X.user.id===A.lisenReturnSignal.receiverId?{...X,audio:A.lisenReturnSignal.audio,video:A.lisenReturnSignal.video}:X))}},[A]),te.useEffect(()=>{if(w&&!f){let L,j;return(async()=>{try{L=await navigator.mediaDevices.getUserMedia({audio:!0}),j=new window.AudioContext;const ne=j.createMediaStreamSource(L),oe=j.createAnalyser();oe.fftSize=256,ne.connect(oe);const he=oe.frequencyBinCount,pe=new Uint8Array(he),_e=()=>{oe.getByteFrequencyData(pe);const J=pe.reduce((ee,le)=>ee+le,0)/he;y.current.forEach(ee=>{ee.peer.send(JSON.stringify({isSpeaking:J>50}))}),u.current&&(J>50?u.current.classList.add("is-speaking"):u.current.classList.remove("is-speaking")),requestAnimationFrame(_e)};_e()}catch(ne){console.error("Error setting up audio:",ne)}})(),()=>{L&&L.getTracks().forEach(ne=>ne.stop()),j&&j.close()}}},[w,f]),te.useEffect(()=>{B&&navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(L=>{if(v.current&&(v.current.srcObject=L),T&&!y.current.find(j=>j.user.id===T.lisenSendSignal.user.id)){const j=q(T.lisenSendSignal.signal,L,T.lisenSendSignal.user.id,T.lisenSendSignal.receiverId);j.on("connect",()=>{console.log("connecté remote")}),y.current.push({peer:j,user:T.lisenSendSignal.user,audio:T.lisenSendSignal.audio,video:T.lisenSendSignal.video}),M(X=>[...X,{peer:j,user:T.lisenSendSignal.user,audio:T.lisenSendSignal.audio,video:T.lisenSendSignal.video}]),o({open:!0,severity:"info",message:`${T.lisenSendSignal.user.firstname} ${T.lisenSendSignal.user.lastname}`,subtitle:"a rejoin le call",withImage:!0,photo:T.lisenSendSignal.user.photo??void 0})}else if(B.getVideoCall.members.length>0&&r&&m===0){const j=[];B.getVideoCall.members.forEach(X=>{const ne=K(L,r.id,X.id);ne.on("connect",()=>{console.log("connecté")}),j.push({peer:ne,user:X,audio:!0,video:!0}),y.current.push({peer:ne,user:X,audio:!0,video:!0})}),M(j),N(1)}})},[T,r,B,m]),te.useEffect(()=>{f&&navigator.mediaDevices.getUserMedia({video:!0}).then(L=>{v.current&&(v.current.srcObject=L)})},[f]),!r)return null;const U=async()=>{await I({variables:{userId:r.id,token:b}});const L=y.current.find(j=>j.user.id===r.id);L&&(L.peer.destroy(),y.current.filter(j=>j.user.id!==r.id),M(j=>j.filter(X=>X.user.id!==r.id))),window.close()},ae=()=>{y.current.map(L=>{L.peer.send(JSON.stringify({audio:!w})),L.peer.streams[0].getAudioTracks().forEach(j=>{j.enabled=!w})}),E(L=>!L)},ye=()=>{y.current.map(L=>{L.peer.send(JSON.stringify({video:!f})),L.peer.streams[0].getVideoTracks().forEach(j=>{j.enabled=!f})}),h(L=>!L)},me=()=>{navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}).then(L=>{y.current.forEach(j=>{j.peer.addStream(L)})})};return!B&&P?Se(ce,{children:[Y(yr,{variant:"h4",sx:{textAlign:"center"},children:P.message}),Y(ce,{sx:{display:"flex",justifyContent:"center"},children:Y(ce,{component:"img",src:zi,sx:{width:"60%"}})})]}):Se(ce,{children:[Se(tt,{container:!0,children:[Y(tt,{item:!0,xs:12,md:8,sx:{p:1,display:"flex",justifyContent:"center"},children:f?Y(ce,{component:"video",ref:v,autoPlay:!0,muted:!0,playsInline:!0,sx:{borderRadius:"15px",height:{xs:void 0,md:"100%"}}}):Y(ce,{ref:u,sx:{width:{xs:"80%",md:"100%"},height:{xs:"200px",md:"100%"},backgroundColor:"lightgrey",display:"flex",justifyContent:"center",borderRadius:"15px",alignItems:"center"},children:Y(Gt,{user:r,avatarSx:{width:56,height:56}})})}),Y(tt,{item:!0,xs:12,md:4,sx:{p:1,overflowY:"auto",display:"flex",flexFlow:"row wrap",justifyContent:"center",height:{md:"90vh"}},children:D.map(L=>Y(Li,{val:L},L.user.id))})]}),Y(ce,{sx:{display:"flex",justifyContent:"center",position:"sticky",bottom:"16px"},children:Se(ce,{sx:{width:{xs:"90%",md:"50%"},py:1,backgroundColor:"lightgrey",borderRadius:"20px",display:"flex",justifyContent:"center"},children:[Y(ke,{title:`${w?"désactiver le micro":"activer le micro"}`,children:Y(je,{onClick:ae,sx:{mr:1},children:w?Y(or,{sx:{fill:"white"}}):Y(Ge,{sx:{fill:"white"}})})}),Y(ke,{title:`${f?"désactiver la camera":"activer la caméra"}`,children:Y(je,{onClick:ye,sx:{mr:1},children:f?Y(_r,{sx:{fill:"white"}}):Y(sr,{sx:{fill:"white"}})})}),Y(ke,{title:"partager son écran",children:Y(je,{onClick:me,sx:{mr:1},children:Y(ar,{sx:{fill:"white"}})})}),Y(ke,{title:"Racrocher",children:Y(je,{onClick:U,sx:{backgroundColor:"red",mr:1},children:Y(wr,{sx:{fill:"white"}})})})]})})]})};export{Zi as default};
